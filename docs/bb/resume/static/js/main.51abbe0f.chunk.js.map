{"version":3,"sources":["Util.js","Terminal.js","Term.js","Cytoscape.js","App.js","registerServiceWorker.js","index.js"],"names":["Cmd","f","Object","classCallCheck","this","cmd","dmap","d","fromEntries","entries","map","Unique","name","createClass","key","value","allIndexed","R","find","arr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","x","y","err","return","blue","concat","green","orchid","window","$","log","console","greetings","help","bio","website","open","focus","layout","basic","hui","about","info","n","data","_a","_b","_c","_d","_2","_3","toString","s","isNaN","String","Array","isArray","length","slice","join","id","e","trshelp","trsabout","trsdemo","terminal","exec","trsdemo2","execs","cmds","delay","arguments","i","setTimeout","Terminal","props","_this","possibleConstructorReturn","getPrototypeOf","call","state","command","setState","_this2","_this$props","interpreter","options","objectWithoutProperties","onCommandChange","update","term","result","eval","echo","error","node","destroy","_this3","react_default","a","createElement","ref","React","Component","COLORS","make_str","con","_len","args","_key","make_uni","_len2","_key2","apply","toConsumableArray","hash0","Term","_len3","_key3","save","flash","_len4","_key4","construct","constructor","App","color","shape","text-margin-y","Judg","Prim","val","_len6","_key6","Truth","arg","_this4","edgename","_len8","_key8","prim","_len9","_key9","prop","_len12","_key12","Prop","plus","_len14","_key14","mul","_len15","_key15","ifte","_len16","_key16","steps","_len18","_key18","bstep","_len19","_key19","_truth","_len23","_key23","_mv","_len24","_key24","MVar","arithRules","WILD","U","_this5","pred","t","_len25","_key25","_this6","border-color","_len26","_key26","Rule","prems","conc","remove","e_iftrue","e_iffalse","e_if","i_steps","e_plus","M","e_mul","primisnorm","v","v1","v2","t1","t2","t3","B_Value","B_IfTrue","B_IfFalse","B_Plus","B_Mul","K","E","V","sticky","Builder","cy","_this7","STORE","run","test","_this8","add","uni","hash","edges","objectSpread","forceStyle","getData","batch","ext","extent","position","x1","x2","Math","random","w","y1","y2","h","_ref","_ref2","slicedToArray","edgeData","source","target","width","getEdgeData","push","_this9","force","incomers","outgoers","out","r","_this10","_len27","nodes","_key27","filter","visible","p","b","n2","dx","dy","sqrt","forcey","forcex","shift","fit","setInterval","tick","unify","patterns","m","match","pattern","every","_ref3","_ref4","_len28","terms","_key28","_ref5","_ref6","t0","union","_ref7","_ref8","_ref9","l0","_ref10","l1","xhash","p0","p1","_ref11","_p","_p2","ps","u","_ref12","_ref13","maketruth","label","replace","copy","_ref14","_ref15","ureplace","_p3","_p4","l","mv","rule","_len29","_key29","goal","_this11","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","truths","g","prove","use","thiz","stack","frame","_thiz$iprove$","iprove","rules","truth","pop","_stack$pop","_ref16","subgoals","step","_rules$","_this12","aprove","str","_this13","_len30","_key30","goals","all","values","allprems","allgoals","includes","toRemove","rem","allToAdd","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_loop2","toAdd","proved","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_loop4","_step6","used","rprems","rp","_U$find","_U$find2","M2","_U$find3","_U$find4","ret","_loop3","_iterator6","_ref20","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_loop","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_ref19","_ref18","_iterator4","tn","c","cytoscape","klay","animate","direction","dagre","nodeSep","rankSep","none","tree","cose","style","selector","content","text-valign","background-color","ele","border-width","text-outline-color","text-outline-width","font-size","text-wrap","curve-style","target-arrow-shape","line-color","target-arrow-color","source-endpoint","Cytoscape","send","focusTerm","setupCyto","bind","assertThisInitialized","cyto","G","$id","maxZoom","toLayout","lay","positions","nonempty","scratch","sort","e1","e2","parseInt","empty","children","_children$","cnode","cshape","max","L","S","newShape","roots","place","pos","treeLayout","elements","dists","bellmanFord","root","colors","distanceTo","focused","collapsed","underAllFocused","acc","intersection","successors","blockedEdges","isEdge","show","isNode","hide","not","breadthFirstSearch","directed","visit","has","maybeLay","setLay","batching","startBatch","endBatch","NEXT_ID","from","spl","edge","mid","dia","addData","applyN","opacity","duration","grow","stop","min","unfocus","toggleShow","toggleFocus","collapse","expand","reset","clear","trs","userZoomingEnabled","userPanningEnabled","document","getElementById","display","B","T","ireduce","reduce","areduce","on","evt","originalEvent","altKey","shiftKey","ctrlKey","metaKey","build","containerID","cyRef","cytoscapeOptions","wheelSensitivity","setupTerm","insert","mecho","debug","mlog","dbg","searchParams","URLSearchParams","location","search","get","className","Row","Col","xs","sm","md","lg","background","onClick","lib_default","transform","src_Cytoscape","src_Terminal_0","onInit","prompt","secret","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","src_App_0","URL","process","origin","addEventListener","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.51abbe0f.chunk.js","sourcesContent":["\nimport * as R from 'ramda';\n\nexport class Cmd { constructor(f) { this.f = f; } }\nexport function cmd(f) { return new Cmd(f); }\n// window.hi = cmd(() => {window.echo(\"hello\")});\nexport function dmap(d, f) { return Object.fromEntries(Object.entries(d).map(f)); }\n// window.dmap = dmap;\n\nexport class Unique {\n    constructor(name) { this.name = name; }\n    toString() { return this.name; }\n}\n\nexport const allIndexed = R.addIndex(R.all);\n\nexport function find(arr, f) {\n    for (var x of arr) {\n        let y = f(x);\n        if (y) { return [x, y]; }\n    }\n    return [null, null];\n}\n\n// export default cmd;\n// export default Cmd;\n// export {cmd, Cmd};","import React from 'react';\nimport 'jquery.terminal';\nimport 'jquery.terminal/css/jquery.terminal.css';\nimport {cmd, Cmd} from './Util.js';\nimport './Terminal.css';\nimport $ from 'jquery';\nimport * as R from 'ramda';\n\nwindow.R = R;\nwindow.$ = $;\nwindow.log = console.log;\n\nwindow.greetings = `[[;royalblue;]--- Alexander Varga ---]\n\nThis is what I call a [[;limegreen;]Hybrid UI] (HUI).\n- All actions take place through this terminal on the right.\n- The GUI on the left can send commands to the terminal.\n\nCommands can be run automatically from the GUI:\n- [[;gold;]CTRL-click]  a node to toggle hidden: [[;gold;]◆]\n- [[;gold;]SHIFT-click] a node to toggle focused: [[;gold;]★]\n\nCommands can be entered manually:\n- Type [[;mediumorchid;]reset] and press enter to reset.\n- Type [[;mediumorchid;]setLay(dagre)] or [[;mediumorchid;]setLay(cose)] for different layouts.\n\nType [[;limegreen;]help] and press enter for help and additional commands.\n`;\nwindow.help = `\n=> bio      : my bio\n=> website  : open my website in new tab\n=> layout   : information about layouts\n=> basic    : basic use of this Hybrid UI\n=> hui      : information about Hybrid UIs in general\n=> about    : how this was made\n=> trs      : start the term rewrite system\n`\n\nwindow.bio = `\nI am a mathematically-minded software developer who is fascinated by programming\nlanguages and abstractions that enable coherent, maintainable, and verifiably-\ncorrect software.\n`\n\nwindow.website = cmd(function() {\n  var win = window.open(\"https://www.asvarga.com\", '_blank');\n  win.focus();\n})\n\nwindow.layout = `\n=> lay() : redo layout\n=> reset() : expand all and layout\n=> setLay(_) : try a differenet layout\n  - examples: dagre, cose, klay\n`\nwindow.basic = `\nThis console runs ordinary Javascript.\nClick on something on the left to send an identifier like 'G(_)' to the console.\nUse a combination of clicking and typing to try the following:\n\n- Basic JS:\n  => x = 2+2\n  => x*x\n- Graph stuff:\n  => G(_).target()\n  => flash(G(_))\n- Add an node/edge/both:\n  => add()\n  => add(G(_), G(_))\n  => add(G(_), add())\n- Remove nodes/edges:\n  => rem(G(_), ...)\n- Split an edge:\n  => spl(G(_))\n`;\nwindow.hui = `\nHybrid UIs enable rapid experimentation without the hastle of interface design.\nI originally made this to experiment with Term Rewriting Systems.\n\nHowever, they have the additional benefit of allowing reproducible interactions.\nReproducing/automating GUI actions can be difficult.\nWhen everything is serialized through the terminal, it's easier.\n`;\nwindow.about = `\nThis demo was built using:\n- React\n- react-cytoscape\n- jquery.terminal\n`;\n\nwindow.info = n => n.data(\"info\");\n\n////\n\n// window.trshelp = `\n\n// `;\n\nfunction gold(x) { return `[[;gold;]${x}]`; }\nfunction blue(x) { return `[[;royalblue;]${x}]`; }\nfunction green(x) { return `[[;limegreen;]${x}]`; }\nfunction orchid(x) { return `[[;mediumorchid;]${x}]`; }\nlet _a = blue('a');\nlet _b = green('b');\nlet _c = orchid('c');\nlet _d = orchid('d');\nlet _2 = blue('2');\nlet _3 = green('3');\nwindow.trshelp = `\nTerm Rewriting Systems mechanize reasoning like:\n(${_a}*${_b})+(${_a}*${_c}) is simply ${_a}*(${_b}+${_c}) so (${_2}*${_3})+(${_2}*${_d}) is simply ${_2}*(${_3}+${_d})\n\nHere, I'm using one to implement a Proof Assistant.\n☆ : Hollow stars represent goals we wish to prove.\n★ : Filled stars represent theorems we have proved.\n\nTry these:\n=> trsdemo   : run a demo\n=> trsdemo2  : run a longer demo\n=> trsabout  : about term rewrite systems\n\nMethods:\n- reduce(t) : create a goal to reduce term t\n- prove(g)  : automatically prove goal g\n- ireduce/iprove : interactive reducion/proving\n- areduce/aprove : animated reduction/proving\n`;\nwindow.trsabout = cmd(function() {\n  var win = window.open(\"https://en.wikipedia.org/wiki/Rewriting#Term_rewriting_systems\", '_blank');\n  win.focus();\n})\n\nwindow.trsdemo  = cmd(() => {window.terminal.exec(`areduce(G(161))`)});\nwindow.trsdemo2 = cmd(() => {window.terminal.exec(`areduce(G(164))`)});\n\n// window.trsdemoq = cmd(() => window.send(`\n// ireduce(G(161));\n// iprove(G(172));\n// iprove(G(184));\n// iprove(G(178));\n// iprove(G(172));`));\n\n// window.trsdemo = cmd(() => window.execs([\n//   \"ireduce(G(161))\",\n//   \"iprove(G(172))\",\n//   \"iprove(G(184))\",\n//   \"iprove(G(178))\",\n//   \"iprove(G(172))\"  // , \"toggleFocus(G(200))\"\n// ]));\nwindow.execs = function(cmds, delay=1000) {\n  let i = 0;\n  function f() {\n    if (i < cmds.length) { window.terminal.exec(cmds[i]); i++; }\n    window.setTimeout(f, delay);\n  }\n  f();\n}\n\n// window.trsdemo2 = cmd(() => window.execs([\n//   \"sticky /= 10\",\n//   \"ireduce(G(164))\",\n//   \"iprove(G(172))\",\n//   \"r(G(179))\",\n//   \"r(G(185))\",\n//   \"iprove(G(190))\",\n//   \"r(G(211))\",\n//   \"iprove(G(201))\",\n//   \"iprove(G(206))\",\n//   \"iprove(G(190))\",\n//   \"iprove(G(196))\",\n//   \"iprove(G(223))\",\n//   \"iprove(G(229))\",\n//   \"iprove(G(196))\",\n//   \"iprove(G(172))\"\n// ]));\n\n////\n\nfunction toString(x) {\n  if (typeof x === 'string') {\n    // return x;\n    return `[[;gold;]\"${ x }\"]`;\n  } else if (x instanceof Cmd) {\n    var s = x.f();\n    if (s) { return `[[;gold;]\"${ s }\"]` }\n  } else if (!isNaN(x)) {\n    return `[[;mediumorchid;]${ String(x) }]`;\n  } else if (Array.isArray(x)) {\n    if (x.length > 10) {\n      return \"[[;limegreen;]⁅]\" + x.slice(0, 10).map(toString).join(\"[[;limegreen;], ]\") + \"[[;limegreen;], ]...[[;limegreen;]⁆]\"\n    } else {\n      return \"[[;limegreen;]⁅]\" + x.map(toString).join(\"[[;limegreen;], ]\") + \"[[;limegreen;]⁆]\";\n    }\n  } else if (typeof x === 'object') {\n    try {\n      // return String(R.map(n => n.id(), x));\n      if (x.id()) {\n        return `[[;orange;]{]G(${ x.id() })[[;orange;]}]`;\n      } else {\n        return \"[[;orange;]{]...[[;orange;]}]\";\n      }\n    } catch (e) {\n      return \"[[;orange;]{]...[[;orange;]}]\";\n    }\n  } else if (typeof x === \"function\") {\n    return `[[;royalblue;](${ x.name })]`;\n  } else {\n    return String(x);\n  }\n}\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {command: ''};\n  }\n  update(command) {\n    this.setState({\n      command\n    });\n  }\n  componentDidMount() {\n    var {interpreter, ...options} = this.props;\n    if (!options.onCommandChange) {\n      options.onCommandChange = (command) => this.update(command);\n    }\n    interpreter = interpreter || function(command, term) {\n      if (command !== '') {\n        try {\n          var result = window.eval(command);\n          if (result !== undefined) {\n            var s = toString(result);\n            if (s !== undefined) { term.echo(s); }\n          }\n        } catch(e) {\n          term.error(String(e));\n          // throw(e);\n        }\n      } else {\n        term.echo('');\n      }\n    };\n    this.terminal = $(this.node).terminal(interpreter, options);\n  }\n  componentWillUnmount() {\n    this.terminal.destroy();\n  }\n  isCommandControlled() {\n    return this.props.command !== undefined;\n  }\n  render() {\n    return (\n      <div ref={(node) => this.node = node}></div>\n    );\n  }\n}\n\nexport default Terminal;\n","\n// import React from 'react';\n// import Cytoscape from './Cytoscape.js';\n\nimport * as U from './Util.js';\nimport * as R from 'ramda';\n\n////\n\nconst COLORS = {\n  blue:   \"#11479E\", \n  black:  \"#0A1128\", \n  gray:   \"#586F7C\", \n  gold:   \"#EAC435\", \n  red:    \"#E40066\"\n};\n\nfunction make_str(con, ...args) { return \"(\"+con+\" \"+args.map(String).join(\" \")+\")\"; }\nfunction make_uni(con, ...args) { return make_str(con, ...args.map(a => a.hash0())); }\n\n//// TERMS ////\n\nclass Term {\n  // constructor does just enough to compute uni and save args\n  constructor(con, ...args) {\n    this.con = con;\n    this.args = args;\n    this.save = false; \n  }\n\n  hash0() { return `@${this.id}`; }\n  hash() { return make_uni(this.con, ...this.args); }\n  getData() { return {}; }\n  getEdgeData(i) { return {}; }\n\n  toString() { return make_str(this.con, ...this.args); }\n  // toString() { return this.hash(); }\n  // fullString() { return make_str(this.con, ...this.args); }\n  flash() { window.flash(this.node); }\n  copy(...args) { return new this.constructor(this.con, ...args); }\n}\n\nclass App extends Term {\n  getData() { return {color: COLORS.blue, shape: \"triangle\", 'text-margin-y': '5px'}; }\n}\n\nclass Judg extends Term {\n  getData() { return {color: COLORS.gray, shape: \"diamond\"}; }\n}\n\nclass Quote extends Judg {\n  constructor(arg, ord=1) {\n    super(\"quote\", arg);\n    this.ord = ord;\n    this.val = arg;\n  }\n  getData() { return {name: `+${this.ord}+`, ...super.getData()}; }\n  getEdgeData(i) { return {edgename: null}; }\n  copy(...args) { return new this.constructor(...args); }\n}\n\nclass Prim extends Term {\n  constructor(val, f=null) { \n    super(\"prim\");\n    this.val = val;\n    this.f = f;\n  }\n  // hash0() { return this.val; }\n  hash() { return this.val; } // Math.random(); }\n  toString() { return String(this.val); }\n  getData() { return {name: this.val, color: COLORS.black}; }\n  copy(...args) { return new this.constructor(...args); }\n}\n\nclass Type extends Term {\n  constructor(type) { \n    super(\"type\");\n    this.val = type;\n  }\n  hash() { return this.val; }\n  toString() { return this.val; }\n  getData() { return {name: this.val, color: COLORS.red}; }\n  copy(...args) { return new this.constructor(...args); }\n}\n\nclass Truth extends Term {\n  constructor(arg) { \n    super(\"truth\", arg);\n    this.val = arg;\n  }\n  getData() { return {name: \"\", color: COLORS.gold, shape: \"star\", 'text-margin-y': '2px'}; }\n  getEdgeData(i) { return {edgename: null}; }\n  toString() { return `$${this.val}`}\n  copy(...args) { return new this.constructor(...args); }\n}\n\nexport function prim(...args)   { return new Prim(...args ); }\nexport function type(...args)   { return new Type(...args ); }\nexport function quote(...args)  { return new Quote(...args); }\nexport function prop(...args)   { return new Prop(...args); }\n\nexport function term(...args)   { return new App(...args ); }\nexport function plus(...args)   { return new App(\"+\", ...args ); }\nexport function mul(...args)    { return new App(\"x\", ...args ); }\nexport function ifte(...args)   { return new App(\"?:\", ...args ); }\n\nexport function step(...args)   { return new Judg(\"→\", ...args ); }\nexport function steps(...args)  { return new Judg(\"→*\", ...args ); }\nexport function bstep(...args)  { return new Judg(\"⇓\", ...args ); }\nexport function isa(...args)    { return new Judg(\":\", ...args ); }\nexport function eq(...args)     { return new Judg(\"=\", ...args ); }\nexport function norm(...args)   { return new Judg(\"↓\", ...args ); }\n\n// \"private\"\nfunction _truth(...args) { return new Truth(...args); }\nfunction _mv(...args)    { return new MVar(...args); }\n\nconst WILD = new U.Unique(\"WILD\");\n\n//// PATTERNS ////\n\nclass MVar extends Term {\n  constructor(name, arg=null, pred=null) {\n    super(\"MV\");\n    switch (typeof pred) {\n      case \"string\":\n        this.pred = (t => t.con === pred); break;\n      case \"function\":\n        this.pred = pred; break;\n      default:\n        this.pred = (()=>true);\n    }\n    this.name = name;\n    this.val = arg;\n  }\n  hash() { return this.arg ? make_uni(\"@\"+this.name, this.arg) : \"@\"+this.name; }   // should use pred too\n  getData() { return {name: this.name, color: COLORS.gray, shape: \"vee\"}; }\n  toString() { return `@${this.name}`; }\n  copy(...args) { return new this.constructor(...args); }\n}\nclass Prop extends Term {\n  constructor(arg) { \n    super(\"prop\", arg);\n    this.val = arg;\n  }\n  getData() { return {\n    name: \"\", shape: \"star\", 'text-margin-y': '2px',\n    color: COLORS.black, 'border-color': COLORS.gold }; }\n  getEdgeData(i) { return {edgename: null}; }\n  toString() { return `?${this.val}`}\n  copy(...args) { return new this.constructor(...args); }\n}\n\nclass Rule {\n  constructor(name, prems, conc, remove=null) {\n    this.name = name;\n    this.prems = prems;\n    this.conc = conc;\n    this.remove = remove || [];\n  }\n}\n\nvar arithRules;\nif (true) {\n  const e_iftrue = window.e_iftrue = new Rule(\"e_iftrue\",\n    [ ifte(prim(true), _mv(\"then\"), _mv(\"else\")) ], \n    prop(steps(_mv(\"arg0\"), _mv(\"then\"))));\n  const e_iffalse = window.e_iffalse = new Rule(\"e_iffalse\",\n    [ ifte(prim(false), _mv(\"then\"), _mv(\"else\")) ], \n    prop(steps(_mv(\"arg0\"), _mv(\"else\"))));\n  const e_if = window.e_if = new Rule(\"e_if\",\n    [ prop(steps(_mv(\"a\"), _mv(\"a'\"))),\n      ifte(_mv(\"a\"), _mv(\"then\"), _mv(\"else\"))    ],\n    prop(steps(\n      ifte(_mv(\"a\"), _mv(\"then\"), _mv(\"else\")),\n      ifte(_mv(\"a'\"), _mv(\"then\"), _mv(\"else\")))),\n    [ _mv(\"arg0\") ]);\n  const i_steps = window.i_steps = new Rule(\"i_steps\",\n    [ prop(steps(_mv(\"a\"), _mv(\"b\"))),\n      prop(steps(_mv(\"b\"), _mv(\"c\")))    ],\n    prop(steps(_mv(\"a\"), _mv(\"c\"))),\n    [ _mv(\"arg0\"), _mv(\"arg1\") ] );\n  const e_plus = window.e_plus = new Rule(\"e_plus\",\n    [ plus(_mv(\"x\"), _mv(\"y\", prim(WILD))) ],\n    prop(steps(_mv(\"arg0\"), M => prim(M.x+M.y))));\n  const e_mul = window.e_mul = new Rule(\"e_mul\",\n    [ mul(_mv(\"x\"), _mv(\"y\", prim(WILD))) ],\n    prop(steps(_mv(\"arg0\"), M => prim(M.x*M.y))));\n  const primisnorm = window.primisnorm = new Rule(\"primisnorm\",\n    // [ prop(steps(_mv(\"a\"), _mv(\"a'\", null, (a => !isNaN(a.val))))) ],\n    [ prop(steps(_mv(\"a\"), _mv(\"a'\", prim(WILD)))) ],\n    prop(bstep(_mv(\"a\"), _mv(\"a'\"))),\n    [ _mv(\"arg0\") ] );\n\n  arithRules = [e_iftrue, e_iffalse, e_if, i_steps, e_plus, e_mul, primisnorm];\n}\nif (true) {\n  let v  = _mv(\"v\" , prim(WILD));\n  let v1 = _mv(\"v1\", prim(WILD));\n  let v2 = _mv(\"v2\", prim(WILD));\n  let t1 = _mv(\"t1\");\n  let t2 = _mv(\"t2\");\n  let t3 = _mv(\"t3\");\n\n  const B_Value = window.B_Value = new Rule(\"B_Value\",\n    [  ], \n    prop(bstep( v , v )));\n  const B_IfTrue = window.B_IfTrue = new Rule(\"B_IfTrue\",\n    [ prop(bstep(t1, prim(true))), prop(bstep(t2, v)) ], \n    prop(bstep( ifte(t1, t2, t3) , v )));\n  const B_IfFalse = window.B_IfFalse = new Rule(\"B_IfFalse\",\n    [ prop(bstep(t1, prim(false))), prop(bstep(t3, v)) ], \n    prop(bstep( ifte(t1, t2, t3) , v )));\n  const B_Plus = window.B_Plus = new Rule(\"B_Plus\",\n    [ prop(bstep(t1, v1)), prop(bstep(t2, v2)) ], \n    prop(bstep( plus(t1, t2) , prim(WILD, a => a(v1) + a(v2))  )));  // a does lookup in mapping\n  const B_Mul = window.B_Mul = new Rule(\"B_Mul\",\n    [ prop(bstep(t1, v1)), prop(bstep(t2, v2)) ], \n    prop(bstep( mul(t1, t2) , prim(WILD, a => a(v1) * a(v2))  )));   // a does lookup in mapping\n\n  arithRules = [B_Value, B_IfTrue, B_IfFalse, B_Plus, B_Mul];\n}\n  \n//// BUILDER ////\n\nwindow.K = \"K\";\nwindow.E = \"E\";\nwindow.V = \"V\";\nwindow.sticky = 0.4;\n\nexport class Builder {\n  constructor(cy, next) {\n    this.cy = cy;\n    this.next = next;\n    this.STORE = {};\n    this.run();\n\n    window.test = U.cmd(() => this.test());\n    // window.send('test');\n  }\n  add(term, save=true) {\n    if (!term) { return; }\n    term.save |= save;\n\n    // make children\n    term.args = term.args.map(arg => this.add(arg, false));\n\n    // cons hashing\n    var uni = term.hash();\n    if (uni in this.STORE) { \n      term = this.STORE[uni];\n      term.save |= save; \n      this.cy.add(term.node);\n      term.edges.map(e => this.cy.add(e));\n      return term;\n    }\n    this.STORE[uni] = term;\n\n    // build term\n    term.id = this.next();\n    var data = {\n      term,\n      id: term.id, name: term.con,\n      forceStyle: true,\n      ...term.getData()\n    }\n    \n    window.batch();\n    // term.node = this.cy.add({data});\n    let ext = this.cy.extent();\n    term.node = this.cy.add({data, position: {\n      x:(ext.x1+ext.x2)/2+Math.random()*ext.w/10, // y:ext.y2-ext.h/10}});\n      y:(ext.y1+ext.y2)/2+Math.random()*ext.h/10}});\n\n    // connect children\n    term.edges = [];\n    for (var [i, arg] of term.args.entries()) {\n      // console.log(arg);\n      var edgeData = {\n        id: this.next(), edgename: i,\n        source: term.node.id(), \n        target: arg.node.id(),\n        width: 2,\n        ...term.getEdgeData(i)\n      }\n      term.edges.push(this.cy.add({data: edgeData}));\n    }\n\n    return term;\n  }\n  r(node, force=true) {\n    node = n(node);\n    if (!node) { return; }\n    var term = t(node);\n    if (force) { term.save = false; }\n    if (!term.save && node.incomers('node').length == 0) {\n      var outgoers = node.outgoers('node');     // store outgoers but don't recur yet\n      this.cy.remove(node);                     // remove node\n      outgoers.map(out => this.r(out, false));  // okay now recur\n    }\n  }\n  rs(...nodes) { nodes.map(n => this.r(n)); }\n  tick() { \n    const mul = 1;\n    var nodes = this.cy.nodes().filter(n => n.visible());\n    var edges = this.cy.edges().filter(n => n.visible());\n    let ext = this.cy.extent();\n    let cx = (ext.x1+ext.x2)/2;\n    let cy = (ext.y1+ext.y2)/2;\n    nodes.map(n => {\n      n.d = {x:0, y:0};\n      n.p = n.position();\n    });\n    nodes.map(n => {\n      var args = t(n).args;\n      for (var i=0; i<args.length-1; i++) {\n        var a = args[i].node[0];\n        var b = args[i+1].node[0];\n        let dx = b.p.x - a.p.x;\n        // push first sibling 80 left of next\n        let force = (dx - 80)/(10+0*i);\n        a.d.x += force*mul;\n        b.d.x -= force*mul;\n      }\n      nodes.map(n2 => {\n        if (n == n2) { return; }\n        let dx = n2.p.x - n.p.x;\n        let dy = n2.p.y - n.p.y;\n        let d = Math.sqrt(dx*dx + dy*dy);\n        // but push close nodes apart // pull pairs of nodes together\n        let force = (d<80 ? (80-d)/20 : 0);// - d/2000;\n        n.d.x -= dx/d*force*mul;\n        n.d.y -= dy/d*force*mul;\n        n2.d.x += dx/d*force*mul;\n        n2.d.y += dy/d*force*mul;\n      });\n      // // push roots to y=0\n      // if (!n.incomers().length) {\n      //   let force = n.p.y/10;\n      //   n.d.y -= force*mul;\n      // }\n    });\n    edges.map(e => {\n      var s = e.source();\n      var t = e.target();\n      let dy = t.p.y - s.p.y;\n      let dx = t.p.x - s.p.x;\n      // push target 80 below source\n      let forcey = (dy - 80)/10;\n      s.d.y += forcey*mul;\n      t.d.y -= forcey*mul;\n      // pull connected nodes together \n      let forcex = dx/80;\n      s.d.x += forcex*mul;\n      t.d.x -= forcex*mul;\n    })\n    nodes.map(n => {\n      if (n.d.x*n.d.x + n.d.y*n.d.y > window.sticky) {\n        n.shift(n.d);\n      }\n    });\n    this.cy.fit(nodes, 20);\n  }\n  run() { \n    setInterval(this.tick, 50);\n  }\n  test() {\n    let a =   this.add(prop(plus(_mv('x'), plus(prim(13), prim(14)))));\n    let b =   this.add(_truth(plus(plus(prim(11), prim(12)), _mv('y'))));\n    let M =   this.unify(a, b);\n    // // let res = this.add(this.replace(a, M));\n    console.log(String(a));\n    console.log(String(b));\n    console.log(M);\n\n    // let x = plus(prim(10), prim(20));\n    // this.add(x);\n    // this.r(x);\n    // return this.add(x);\n  }\n\n  //// REWRITING ////\n\n  match(patterns, ...terms) {\n    var M = {\"m\":1};\n    function match(pattern, term) {\n      // console.log(String(pattern), String(term));\n      if (pattern === term) { return true; }\n      switch (pattern.con) {\n        case \"MV\":\n          if (pattern.name in M) { return M[pattern.name] == term; }\n          M[pattern.name] = term;\n          if (!pattern.pred(term)) { return false; }\n          if (pattern.val) { return match(pattern.val, term); }\n          return true;\n        case \"prim\":\n        case \"type\":\n          return term.con == pattern.con && (term.val == pattern.val || pattern.val == WILD);\n        case \"prop\":\n          return (term.con == \"truth\" || term.con == \"prop\") && match(pattern.val, term.val);\n        default:\n          if (pattern.con !== term.con) { return false; }\n          if (pattern.args.length !== term.args.length) { return false; }\n          return Object.entries(pattern.args).every(([i,a]) => match(a, term.args[i]));\n      }\n    }\n    if (!Array.isArray(patterns)) { patterns = [patterns] }\n    if (patterns.length != terms.length) { return false; }\n    if (U.allIndexed( ([p,t],i) => match(_mv(\"arg\"+i, p), t), R.zip(patterns, terms) )) { return M; }\n  }\n  unify(t0, t1, M=null) {\n    let next = this.next;\n    // {[term,(0|1|2)] : term}\n    if (M) {\n      M = U.dmap(M, R.identity);\n    } else {\n      M = {\"u\":1};\n    }\n    function union([t0,l0], [t1,l1]) {\n      M[[t0.hash(),l0]] = [t1,l1];\n      return [t1,l1];\n    }\n    function find(x) {\n      if (x in M) {\n        let xhash = [x[0].hash(),x[1]];\n        M[xhash] = find(M[xhash]);\n        return M[xhash];\n      }\n      return x;\n    }\n    function val(p) { return [p[0].val, p[1]]; }\n    function args(p) { return R.map(a => [a,p[1]], p[0].args); }\n    function unify(p0, p1) {\n      [p0, p1] = [find(p0), find(p1)];  // get roots of union trees\n      if (p0 === p1) { return true; }   // if same then done early\n      let [[t0,l0],[t1,l1]] = [p0,p1];  // extract terms and labels\n      if (t0 === null || t1 === null) { return true; }  // happens if val of MV is null\n\n      if (t0.con == t1.con) {\n        let con = t0.con;\n        if (con == \"MV\") { union(p0, union(p1, [_mv(`~${next()}~`), 2])); return unify(val(p0), val(p1)); }\n        if (con == \"prim\" || con == \"type\") { \n          return (t0.val == WILD) || (t1.val == WILD) || (t0.val == t1.val);\n          // if (t0.val == WILD) { union(p0, p1); return true; }\n          // if (t1.val == WILD) { union(p1, p0); return true; }\n          // return t0.val == t1.val; \n        }\n        return R.all( ps => unify(...ps) , R.zip(args(p0), args(p1)) );\n      } else {\n\n        if (t0.con == \"MV\") { union(p0, p1); return unify(val(p0), p1); }\n        if (t1.con == \"MV\") { union(p1, p0); return unify(val(p1), p0); }\n        if (t0.con == \"prop\" && t1.con == \"truth\") {\n          union(p0, p1);\n          return R.all( ps => unify(...ps) , R.zip(args(p0), args(p1)) ); \n        }\n        if (t1.con == \"prop\" && t0.con == \"truth\") {\n          union(p1, p0);\n          return R.all( ps => unify(...ps) , R.zip(args(p0), args(p1)) ); \n        }\n      }\n    }\n  \n    if (!Array.isArray(t0)) { t0 = [t0] }\n    if (!Array.isArray(t1)) { t1 = [t1] }\n    if (t0.length != t1.length) { return false; }\n    // if (U.allIndexed( ([t,s],i) => unify([_mv(\"arg\"+i, t),0], [_mv(\"arg\"+i, s),1]), R.zip(t0, t1) )) { return M; }\n    if (R.all( ([t,s]) => unify([t,0], [s,1]), R.zip(t0, t1) )) { return M; }\n  }\n\n  replace(t, M, maketruth=false, label=0) {\n    function find(x) {  // THIS IS COPY/PASTED FROM UNIFY :(\n      if (x in M) {\n        let xhash = [x[0].hash(),x[1]];\n        M[xhash] = find(M[xhash]);\n        return M[xhash];\n      }\n      return x;\n    }\n    function args(p) { return R.map(a => [a,p[1]], p[0].args); }\n    function ureplace(p) {\n      p = find(p);\n      let [t,l] = p;\n      switch (t.con) { \n        case \"MV\":    // already did find so p is root and still free in result\n        case \"type\":  return t;\n        case \"prim\":\n          if (t.f) {  return prim(t.f(mv => M[[mv,l]][0].val)); }  // pass lookup function\n          return t;\n        case \"prop\":  return (maketruth ? _truth : prop)(...args(p).map(ureplace));\n        default:      return t.copy(...args(p).map(ureplace));\n      }\n    }\n    function replace(conc) {\n      switch (conc.con) { \n        case \"MV\":    return M[conc.name];\n        case \"prim\":\n          if (conc.f) { return conc.copy(conc.f( U.dmap(M, ([k,v]) => [k,v.val]) )); }\n          return conc;\n        case \"type\":  return conc;\n        case \"prop\":  return (maketruth ? _truth : prop)(replace(conc.val));\n        default:      return new conc.constructor(conc.con, ...conc.args.map(replace));\n      }\n    }\n    if (!M)  { return; }\n    if (M.u) { \n      // if (t instanceof Rule) { \n      //   return new Rule(t.name+\"'\", t.prems.map(p => ureplace([p,label])), ureplace([conc,label]), t.remove);\n      // }\n      return ureplace([t,label]); }\n    if (M.m) { \n      // if (t instanceof Rule) { \n      //   return new Rule(t.name+\"'\", t.prems.map(p => ureplace([p,label])), ureplace([conc,label]), t.remove);\n      // }\n      return replace(t); \n    }\n  }\n\n  use(rule, ...prems) {\n    prems = prems.map(t);\n    if (prems.length == rule.prems.length) {            // desired conc *not* provided\n      let M = this.match(rule.prems, ...prems);\n      if (M) { return this.replace(rule.conc, M, true); }\n    } else if (prems.length == rule.prems.length+1) {   // desired conc *is* provided\n      let M = this.unify([rule.conc].concat(rule.prems), prems);\n      if (M) { return this.replace(rule.conc, M, true); }\n    }\n  }\n\n  prove(goal) {\n    for (var rule of arithRules) {\n      var M = this.unify(rule.conc, goal);\n      if (M) {  // this rule can build the goal\n        var subgoals = rule.prems.map(p => this.replace(p, M));\n        var truths = subgoals.map(g => this.prove(g));\n        if (truths.every(R.identity)) {\n          return this.use(rule, goal, ...truths);\n        }\n      }\n    }\n  }\n  reduce(node) {\n    return this.add(this.prove(prop(bstep(t(node), _mv('res')))));\n  }\n\n  aprove(goal, delay=1000) {\n    let thiz = this;\n    let stack = [];\n    function push(goal) {\n      let frame = {goal};\n      let {rules, truth} = thiz.iprove(\"V\", goal)[0];   // break out subgoals\n      frame.rules = rules.map(rule => ({truths: [], ...rule}));\n      frame.truth = truth;\n      stack.push(frame);\n    }\n    function pop() {\n      var {rules, truth} = stack.pop();\n      rules.map(({subgoals}) => subgoals.map(s => thiz.r(thiz.add(s))));\n      if (stack.length) {\n        let {rules} = stack[stack.length-1];\n        if (truth) {  // success\n          rules[0].truths.push(truth); \n        } else {      // fail\n          let {subgoals} = rules.shift();\n          subgoals.map(s => thiz.r(s));\n        }\n      }\n    }\n    function step() {\n      while(stack.length) {\n        // console.log(stack);\n        let frame = stack[stack.length-1];\n        let {goal, rules, truth} = frame;\n        if (!rules.length || truth) { // pop\n          pop();\n        } else {\n          let {rule, subgoals, truths} = rules[0];\n          if (subgoals.length == truths.length) {  // all truths found\n            frame.truth = this.iprove(\"V\", rule, goal, ...truths)[0].truth;   // build up truth\n          } else {  // more work to do\n            let subgoal = subgoals[truths.length];\n            push(subgoal);\n            window.setTimeout(step, delay);\n            break;\n          }\n        }\n      }\n    }\n    push(goal);\n    window.setTimeout(step, delay);\n  }\n  areduce(node, delay=1000) {\n    let goal = this.add(prop(bstep(t(node), _mv('res'))));\n    window.setTimeout(() => this.aprove(goal, delay), delay);\n    window.echo(`[[;gold;]\"Animatedly proving [[;royalblue;]${str(goal)}]\"]`);\n  }\n\n  ireduce(node) {\n    let goal = this.add(prop(bstep(t(node), _mv('res'))));\n    window.echo(`[[;gold;]\"Interactively proving [[;royalblue;]${str(goal)}]\"]`);\n  }\n\n  iprove(...args) { \n    args = args.map(t);\n    let goals = args.filter( x => x instanceof Prop  );\n    let prems = args.filter( x => x instanceof Truth );\n    let rules = args.filter( x => x instanceof Rule  );\n    if (!rules.length && goals.length) { rules = arithRules; }  // default to all rules when goal-directed\n\n    let all = Object.values(this.STORE).filter(t => n(t).visible());\n    let allprems = all.filter(t => t instanceof Truth && !(t in prems));\n    let allgoals = all.filter(t => t instanceof Prop  && !(t in goals));\n\n    let K = args.includes(\"K\");\n    let toRemove = [];\n    function rem(t) { if (!K && !toRemove.includes(t)) { toRemove.push(t); } }\n\n    // let E = args.includes(\"E\");\n    function log(x)  { if (false) { console.log(x); } return x; }\n    function echo(x) { if (true) { window.echo(`[[;gold;]\"${x}\"]`); } return x; }\n\n    log(\"--- iprove ---\");  \n\n    let v = args.includes(\"V\");\n    let allToAdd = [];\n\n    for (let goal of goals) {\n      log(`Goal: ${String(goal)}`);\n      let toAdd = [];\n      let proved = false;\n      for (let rule of rules) {\n        log(`Rule: ${rule.name}`);\n      \n        var M = this.unify(rule.conc, goal);\n        if (!M) { continue; }\n\n        let used = [];\n        let rprems = rule.prems.filter(rp => {\n          let [p, M2] = U.find(prems, p => this.unify(rp, p, M));       // prems\n          if (p) { used.push(p); M = M2; }\n          return !p;\n        }).filter(rp => {\n          let [p, M2] = U.find(allprems, p => this.unify(rp, p, M));  // allprems\n          if (p) { used.push(p); M = M2; }\n          return !p;\n        });\n        \n        if (rprems.length) {\n          toAdd.push({rule, subgoals: rprems.map(rp => this.replace(rp, M))});\n        } else {\n          let ret = this.add(this.replace(rule.conc, M, true));\n          echo(`Proved [[;royalblue;]${str(ret)}] with [[;mediumorchid;]${rule.name}]`);\n          rem(goal); \n          used.map(rem);\n          if (v) { allToAdd.push({goal, rules: [], truth: ret}); }\n          proved = true;\n          break; // don't try any more goals, on to next goal\n        }\n      }\n      if (!proved) {\n        toAdd.map(({rule, subgoals}) => {\n          echo(`Added subgoals to prove [[;royalblue;]${String(goal)}] with [[;mediumorchid;]${rule.name}]`);\n          subgoals.map(t => this.add(t));\n        });\n        if (v) { allToAdd.push({goal, rules: toAdd}); }\n      }\n    }\n    if (!goals.length) {\n      log(`No Goal`);\n      for (let rule of rules) {\n        log(`Rule: ${rule.name}`);\n        if (rule.prems.length != prems.length) { continue; }\n        var M;\n        for (let [rp, p] of R.zip(rule.prems, prems)) {\n          M = this.unify(rp, p, M);\n          if (!M) { continue; }\n        };\n        log(String(rule.conc));\n        log(M);\n        let ret = this.add(this.replace(rule.conc, M, true));\n        if (ret) {\n          echo(`Proved [[;royalblue;]${str(ret)}] with [[;mediumorchid;]${rule.name}]`);\n          prems.map(rem);\n          allgoals.filter(g => this.match(g, ret)).map(rem);\n        }\n      }\n    }\n    \n    toRemove.map(t => this.r(t));\n    if (v) { return allToAdd; }\n  }\n\n}\n\n//// EXPORTS ////\n\n// (term|node -> term)\nfunction t(x) {\n  // if (x instanceof Term) { return x; }\n  if (x.data) { return x.data('term'); }\n  return x\n}\n// (term|node -> node)\nfunction n(x) {\n  if (x instanceof Term) { return x.node; }\n  return x;\n}\n// (term|node -> [term,node])\nfunction tn(x) {\n  return [t(x), n(x)];\n}\nwindow.t = t;\nwindow.n = n;\nwindow.tn = tn;\n\n// var t = window.t = (n => n.data('term'));\nvar c = window.c = (n => t(n).con);\n// var v = window.v = (n => t(n).val);\n// var n = window.n = (n => n.data('name'));\nvar str = window.str = (n => String(t(n)));\nvar u = window.u = (n => t(n).hash());\n\nexport default Builder;\n\n","import React from 'react';\nimport {ReactCytoscape, cytoscape} from 'react-cytoscape';\nimport klay from 'cytoscape-klay';\nimport * as R from 'ramda';\nimport {cmd} from './Util.js';\nimport * as T from './Term.js';\n\nimport data from './data2.json';\n// import trsData from './data.json';\n\ncytoscape.use(klay);\nvar klayy = window.klay = { name: 'klay', animate: true, klay: { direction: 'DOWN' } };\nvar dagre = window.dagre = { name: 'dagre', animate: true, nodeSep: 25, rankSep: 40 };\nvar tree = window.tree = { name: 'tree', animate: true };\nvar cose = window.cose = { name: 'cose', animate: true };\nvar none = window.none = { name: 'none' };\n\nconst style = [\n  {\n    selector: 'node',\n    style: {\n      'content': 'data(name)',\n      'text-valign': 'center',\n      'background-color': 'data(color)',\n      'border-color': ele => ele.data('border-color'),\n      'border-width': ele => ele.data('border-color') ? '2px' : '0',\n      'text-outline-color': 'data(color)',\n      'text-outline-width': '2px',\n      'color': '#FFF',\n      'font-size': 9,\n      'shape': 'data(shape)',\n      'text-wrap': 'wrap',\n      'text-margin-y': ele => ele.data('text-margin-y')\n    }\n  },\n\n  {\n    selector: 'edge',\n    style: {\n      // 'content': 'data(id)',\n      'content': 'data(edgename)',\n      'font-size': 8,\n      'curve-style': 'bezier',\n      'width': ele => ele.data('width') || 3,\n      'target-arrow-shape': 'triangle',\n      'line-color': '#9dbaea',\n      'target-arrow-color': '#9dbaea',\n      'source-endpoint': 'inside-to-node'\n    }\n  }\n];\n\nclass Cytoscape extends React.Component {\n  constructor(props) {\n    super(props);\n    this.send = props.send;\n    this.exec = props.exec;\n    this.focusTerm = props.focusTerm;\n    this.setupCyto = this.setupCyto.bind(this);\n  }\n\n  setupCyto(cy) {\n    var cyto = this;\n    window.cy = cyto.cy = cy;\n    window.G = id => cy.$id(String(id));\n    // window.cyto = cyto;\n\n    // console.log(data);\n    cy.maxZoom(4);\n\n    ////\n\n    function treeLayout() {\n\n      function layout(node) {\n        var outgoers = node.outgoers().nodes().sort((e1, e2) => parseInt(e1)-parseInt(e2));\n        if (outgoers.empty()) { return [[0, 0]]; }\n\n        var children = R.zip(outgoers, outgoers.map(layout));\n        var [node0, shape] = children[0];\n        var width = 0;\n        for (var [cnode, cshape] of children.slice(1)) {\n          width = Math.max(...R.zipWith((L, R) => L[1]-R[0]+1, shape, cshape));\n          cnode.scratch().shift = width;\n          cshape = R.map(S => [S[0]+width, S[1]+width], cshape);\n\n          var newShape = R.zipWith((L, R) => [L[0], R[1]], shape, cshape);\n          if (shape.length > cshape.length) { newShape = newShape.concat(shape.slice(cshape.length)); }\n          else if (shape.length < cshape.length) { newShape = newShape.concat(cshape.slice(shape.length)); }\n          shape = newShape;\n        }\n\n        shape = [[0, 0]].concat(R.map(S => [S[0]-width/2, S[1]-width/2], shape));\n        children.map(c => c[0].scratch().shift -= width/2);\n        return shape;\n      }\n\n      function place(node, pos=null, x=0, y=0) {\n        x += node.scratch().shift*60*2/Math.sqrt(3);\n        y += 60;\n        pos[node.id()] = {x, y};\n        node.outgoers().nodes().map(n => place(n, pos, x, y));\n      }\n\n      var positions = {};\n      if (cy.nodes().nonempty()) {\n        cy.nodes().map(function(node) { node.scratch().shift = 0 });\n        layout(cy.nodes().roots());\n        place(cy.nodes().roots(), positions);\n      }\n\n      // console.log(positions);\n      cy.layout({ name: 'preset', animate: true, positions }).run();\n    }\n\n    var toLayout = window.toLayout =\n      (layout) => (typeof layout === 'object' ? layout : { name: layout, animate: true });\n    var lay = function(layout) {\n      var layout = layout ? toLayout(layout) : cyto.layout || dagre;\n      // console.log(layout.name);\n      if (layout.name === \"tree\") { return treeLayout(); }\n\n      var roots = cy.elements().roots();\n\n      var dists = cy.elements().bellmanFord({root: roots});\n      const colors = [\"#11479E\", \"#0A1128\", \"#586F7C\", \"#EAC435\", \"#E40066\"];\n      cy.elements().map(function(n) {\n        if (!n.data(\"forceStyle\")) {\n          n.data(\"color\", colors[dists.distanceTo(n) % colors.length]);\n          n.data(\"shape\", n.data(\"collapsed\") ? \"diamond\" :\n                          n.data(\"focused\") ? \"star\" : \"ellipse\");\n        }\n      })\n\n      var focused   = cy.filter(n => n.data(\"focused\"));\n      var collapsed = cy.filter(n => n.data(\"collapsed\"));\n      var underAllFocused =\n        R.reduce((acc,node) => acc.intersection(node.successors().union(node)),\n                 cy.elements(),     // all\n                 focused);\n      var blockedEdges = collapsed.outgoers().filter(e => e.isEdge());\n\n      // cy.elements().hide();\n      cy.elements().show();\n      cy.elements().filter(n => n.isNode()).hide();\n      cy.elements().not(blockedEdges).breadthFirstSearch({\n        root: roots,\n        directed: true,\n        visit: function(n, e) {\n          if (underAllFocused.has(n)) {\n            n.show();\n          }\n        }\n      });\n      blockedEdges.hide();\n\n      if (layout != none) {\n        cy.filter(n => n.visible()).layout(layout).run();\n      }\n    }\n    window.lay = window.l = cmd(lay);\n\n    function maybeLay() { if (cyto.layout) { lay(); } }\n    var setLay = window.setLay = function(layout) {\n      cyto.layout = toLayout(layout);\n      maybeLay();\n    };\n\n    function batch() {\n      if (cyto.batching) { return; }\n      cy.startBatch();\n      cyto.batching = true;\n      setTimeout(() => {\n        cy.endBatch();\n        cyto.batching = false;\n        maybeLay();\n      })\n    }\n    window.batch = batch;\n\n    ////\n\n    var NEXT_ID = 0;\n    function next() { return NEXT_ID++; }\n\n    var add = window.add = window.a = function(source, target) {\n      batch();\n      var id = next();\n      return cy.add({ data:\n        source ?\n          {id: id, name: id, source: source.id(), target: (target || add()).id()} :\n          {id: id, name: id}\n      });\n    }\n    var rem = window.rem = window.r = function() {\n      batch();\n      Array.from(arguments).map(x => cy.remove(x));\n    }\n\n    var spl = window.spl = window.s = function(edge) {\n      var mid = add();\n      add(edge.source(), mid);\n      add(mid, edge.target());\n      rem(edge);\n      return mid;\n    }\n    var dia = window.dia = window.d = function(edge) {\n      var mid = add();\n      add(edge.source(), mid);\n      add(mid, edge.target());\n      spl(edge);\n    }\n\n    ////\n\n    // var n0 = add(), n1 = add(), n2 = add(), n3 = add(), n4 = add(), n5 = add();//, n6 = add();\n    // add(n0, n1) && add(n0, n2) && add(n2, n3) && add(n2, n4) && add(n1, n5);// && add(n1, n6);\n\n    // setLay(dagre);\n    // var n0 = add(), n1 = add(), n2 = add(), n3 = add(), n4 = add(), n5 = add(), n6 = add();\n    // add(n0, n1) && add(n0, n2) && add(n0, n3) && add(n2, n4) && add(n3, n5) && add(n3, n6);\n    setLay(dagre);\n\n    // var NODES = {};\n    function addData(data) {\n    // var addData = window.addData = function(data) {\n      // if (data.name && data.name in NODES) { return NODES[data.name]; }\n      var n = add();\n      if (data.name) {\n        // NODES[data.name] = n;\n        n.data(\"name\", data.name);\n      }\n      if (data.collapsed) {\n        n.data(\"collapsed\", true);\n        n.data(\"reset-collapsed\", true);\n      }\n      if (data.info) {\n        n.data(\"info\", data.info);\n      }\n      R.map(c => add(n, addData(c)), data.children || []);\n      return n;\n    }\n\n    addData(data);\n    // setLay(dagre);\n    // lay();\n\n    ////\n\n    const applyN = R.compose(R.reduceRight(R.compose, R.identity), R.repeat);\n    window.flash = applyN(x => x.animate({style:{opacity:0.5},duration:250})\n                                .animate({style:{opacity:1},duration:250}), 4);\n    window.grow = function() {\n      window.stop = false;\n      cy.$().remove(); add();\n      (function tick() {\n        if (!window.stop) {\n          add(cy.nodes().min(Math.random).ele);\n          setTimeout(tick, 1000);\n        }\n      })();\n    }\n\n    var hide = window.hide = function(node) {\n      batch();\n      node.data(\"collapsed\", true);\n    }\n    var show = window.show = function(node) {\n      batch();\n      node.data(\"collapsed\", false);\n    }\n    var focus = window.focus = function(node) {\n      batch();\n      // cy.elements().map(unfocus);\n      node.data(\"focused\", true);\n    }\n    var unfocus = window.unfocus = function(node) {\n      batch();\n      node.data(\"focused\", false);\n    }\n\n    var toggleShow = window.toggleShow = function(node) {\n      node.data(\"collapsed\") ? show(node) : hide(node);\n    }\n    var toggleFocus = window.toggleFocus = function(node) {\n      node.data(\"focused\") ? unfocus(node) : focus(node);\n    }\n    var collapse = window.collapse = function(node) {\n      node.union(node.successors()).map(hide);\n    }\n    var expand = window.expand = function(node) {\n      node.union(node.successors()).map(show);\n    }\n    var reset = function() {\n      cy.elements().map(n => n.data(\"reset-collapsed\") ? hide(n) : show(n));\n      cy.elements().map(unfocus);\n    }\n    window.reset = cmd(reset);\n\n    ////\n\n    var clear = function () {\n      cy.remove('*')\n    }\n    window.clear = cmd(clear);\n    var trs = function() {\n      clear();\n      setLay(none); // setLay(cose);\n      cy.userZoomingEnabled(false);\n      cy.userPanningEnabled(false);\n      document.getElementById('logo').style.display = \"none\";\n\n      // addData(trsData);\n      var B = window.B = new T.Builder(cy, next);\n      window.ireduce = (...args) => B.ireduce(...args);\n      window.iprove  = (...args) => B.iprove(...args);\n      window.reduce  = (...args) => B.reduce(...args);\n      window.prove   = (...args) => B.prove(...args);\n      window.areduce = (...args) => B.areduce(...args);\n      window.aprove  = (...args) => B.aprove(...args);\n      window.r       = (...args) => B.r(...args);\n      window.use     = (...args) => B.use(...args);\n      // window.test    = (...args) => B.test(...args);\n      \n      let term = T.ifte(\n          T.ifte(T.prim(true), T.prim(false), T.prim(true)), \n          T.prim(3),      // T.plus(T.prim(3), T.mul(T.prim(3), T.prim(5))), \n          T.plus(T.prim(3), T.prim(5)));\n      // let term = T.ifte(T.prim(true), T.prim(10), T.prim(20));\n      // term = T.quote(term);\n      B.add(term);\n\n      // B.add(T.mul(T.prim(4), T.type(\"foo\")));\n\n      return \"TRS initiated. Enter [[;limegreen;]trshelp] for help and additional commands.\"\n    }\n    window.trs = cmd(trs);\n\n    ////\n\n    cy.on('tap', 'node, edge', function(evt) {\n      var e = evt.originalEvent;\n      // console.log(e);\n      if (e.altKey) {\n        if (e.shiftKey) {\n          cyto.exec(`r(G(${this.id()}))`);\n        } else if (e.ctrlKey || e.metaKey) {\n          cyto.exec(`ireduce(G(${this.id()}))`);\n        } else {\n          cyto.exec(`iprove(G(${this.id()}))`);\n        }\n      } else if (e.shiftKey) {\n        cyto.exec(`toggleFocus(G(${this.id()}))`);\n      } else if (e.ctrlKey || e.metaKey) {\n        cyto.exec(`toggleShow(G(${this.id()}))`);\n      } else {\n        cyto.send(`G(${this.id()})`);\n      }\n    });\n    cy.on('tapstart tapend', this.focusTerm);\n  }\n\n  render() {\n    return (\n      <ReactCytoscape containerID=\"cy\"\n        cyRef={this.setupCyto}\n        elements={{nodes:[]}}\n        // layout={tree}\n        style={style}\n        cytoscapeOptions={{wheelSensitivity: 0.1}}/>\n    );\n  }\n\n}\n\nexport default Cytoscape;\n","import React from 'react';\nimport './App.css';\nimport {cmd} from './Util.js';\nimport Terminal from './Terminal';\nimport Cytoscape from './Cytoscape.js';\nimport {Row, Col} from 'react-bootstrap';\nimport FontAwesome from 'react-fontawesome';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.send = this.send.bind(this);\n    this.setupTerm = this.setupTerm.bind(this);\n    // this.send(\"hi\");\n  }\n  send(val) {\n    this.terminal.insert(val);\n  }\n  exec(val) {\n    window.terminal.exec(val);\n  }\n  setupTerm(term) {\n    window.terminal = this.terminal = term;\n    window.echo = term.echo;\n    window.mecho = (x => { if (window.debug) { term.echo(x) } });\n    window.mlog = (x => { if (window.debug) { console.log(x) } });\n    window.dbg = cmd(() => window.debug = true);\n    window.send = this.send;\n    term.focus();\n    // Automatically run commands through terminal at start:\n    // this.exec(\"trs()\");\n    var searchParams = new URLSearchParams(window.location.search);\n    if (searchParams.has(\"exec\")) {\n      this.exec(searchParams.get(\"exec\"));\n    }\n  }\n  focusTerm() {\n    setTimeout(window.terminal.focus, 0)\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <Row>\n          <Col xs={6} sm={6} md={7} lg={7} style={{\"background\": \"linear-gradient(to bottom right, palegreen, aqua)\"}}>\n            <div className=\"App-body\">\n              <p id=\"logo\" className=\"App-logo\" onClick={()=>{this.send(\"secret\");this.focusTerm()}}>\n                <FontAwesome\n                  name='mouse-pointer'\n                  style={{ transform: 'scale(0.6, 1) rotate(112.5deg)' }} />\n                _\n              </p>\n              <Cytoscape send={this.send} exec={this.exec} focusTerm={this.focusTerm}/>\n            </div>\n          </Col>\n          <Col xs={6} sm={6} md={5} lg={5}>\n            <Terminal\n              onInit={this.setupTerm}\n              greetings={window.greetings}\n              prompt=\"=> \" />\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nwindow.secret = cmd(function() {\n  var win = window.open(\"https://youtu.be/I0JobHULJiE\", '_blank');\n  win.focus();\n})\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}